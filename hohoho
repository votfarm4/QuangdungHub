-- Min V9 Hub - UPDATED 2024
-- Compatible with latest Roblox update
-- Fixed remotes and APIs

if _G.MinV9Loaded then return end
_G.MinV9Loaded = true

-- Services
local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local RS = game:GetService("ReplicatedStorage")
local WS = game:GetService("Workspace")
local TS = game:GetService("TeleportService")
local VU = game:GetService("VirtualUser")
local HTTPS = game:GetService("HttpService")

-- Anti AFK
LP.Idled:Connect(function()
    VU:CaptureController()
    VU:ClickButton2(Vector2.new())
end)

-- Load Rayfield (Updated)
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source.lua'))()

local Window = Rayfield:CreateWindow({
    Name = "MIN V9 HUB - UPDATED 2024",
    LoadingTitle = "Loading Min V9 Hub...",
    LoadingSubtitle = "by quangdunghub",
    ConfigurationSaving = {
       Enabled = true,
       FolderName = "MinV9Hub",
       FileName = "Config"
    },
    Discord = {
       Enabled = false,
       Invite = "quangdung",
       RememberJoins = true
    },
    KeySystem = false,
})

-- Main Tab
local MainTab = Window:CreateTab("üè† Main", 4483362458)

-- Auto Farm Section
local AutoFarmSection = MainTab:CreateSection("Auto Farm")

AutoFarmSection:CreateToggle({
    Name = "Auto Farm Level",
    CurrentValue = false,
    Flag = "AutoFarmToggle",
    Callback = function(Value)
        _G.AutoFarm = Value
        
        if Value then
            task.spawn(function()
                while task.wait() and _G.AutoFarm do
                    pcall(function()
                        -- Get character safely
                        local char = LP.Character
                        if not char or not char:FindFirstChild("Humanoid") then return end
                        
                        -- Equip best weapon
                        local backpack = LP.Backpack
                        local maxDmg = 0
                        local bestTool = nil
                        
                        for _, tool in pairs(backpack:GetChildren()) do
                            if tool:IsA("Tool") and tool:FindFirstChild("Damage") then
                                local dmg = tool.Damage.Value
                                if dmg > maxDmg then
                                    maxDmg = dmg
                                    bestTool = tool
                                end
                            end
                        end
                        
                        if bestTool then
                            char.Humanoid:EquipTool(bestTool)
                        end
                        
                        -- Find nearest enemy
                        local enemies = WS.Enemies:GetChildren()
                        local closest = nil
                        local dist = math.huge
                        
                        for _, enemy in pairs(enemies) do
                            if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                                if enemy:FindFirstChild("HumanoidRootPart") then
                                    local mag = (char.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).Magnitude
                                    if mag < dist then
                                        dist = mag
                                        closest = enemy
                                    end
                                end
                            end
                        end
                        
                        if closest then
                            -- Teleport to enemy
                            char.HumanoidRootPart.CFrame = CFrame.new(
                                closest.HumanoidRootPart.Position.X,
                                closest.HumanoidRootPart.Position.Y + 15,
                                closest.HumanoidRootPart.Position.Z
                            )
                            
                            -- Attack using new remote
                            local args = {
                                [1] = "AttackEntity",
                                [2] = closest.Name
                            }
                            
                            RS.Remotes.CommF_:InvokeServer(unpack(args))
                            
                            -- Auto click
                            VU:CaptureController()
                            VU:ClickButton1(Vector2.new())
                        end
                    end)
                end
            end)
        end
    end,
})

-- Auto Boss Farm
AutoFarmSection:CreateToggle({
    Name = "Auto Farm Boss",
    CurrentValue = false,
    Flag = "AutoBossToggle",
    Callback = function(Value)
        _G.AutoBoss = Value
        
        if Value then
            task.spawn(function()
                while task.wait(1) and _G.AutoBoss do
                    pcall(function()
                        local char = LP.Character
                        if not char then return end
                        
                        local bosses = {
                            "Diamond",
                            "Jeremy",
                            "Fajita",
                            "Smoke Admiral",
                            "Cursed Captain",
                            "Darkbeard",
                            "Order"
                        }
                        
                        for _, bossName in pairs(bosses) do
                            local boss = WS:FindFirstChild(bossName)
                            if boss and boss:FindFirstChild("Humanoid") then
                                if boss.Humanoid.Health > 0 then
                                    char.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 25, 0)
                                    
                                    local args = {
                                        [1] = "AttackEntity",
                                        [2] = bossName
                                    }
                                    RS.Remotes.CommF_:InvokeServer(unpack(args))
                                    
                                    break
                                end
                            end
                        end
                    end)
                end
            end)
        end
    end,
})

-- Auto New World
AutoFarmSection:CreateToggle({
    Name = "Auto New World",
    CurrentValue = false,
    Flag = "AutoNewWorldToggle",
    Callback = function(Value)
        _G.AutoNewWorld = Value
        
        if Value then
            task.spawn(function()
                while task.wait(5) and _G.AutoNewWorld do
                    pcall(function()
                        if LP.Data.Level.Value >= 700 then
                            RS.Remotes.CommF_:InvokeServer("TravelDressrosa")
                        end
                    end)
                end
            end)
        end
    end,
})

-- Raid Tab
local RaidTab = Window:CreateTab("‚öîÔ∏è Raid", 4483362458)
local RaidSection = RaidTab:CreateSection("Raid Features")

RaidSection:CreateToggle({
    Name = "Auto Raid",
    CurrentValue = false,
    Flag = "AutoRaidToggle",
    Callback = function(Value)
        _G.AutoRaid = Value
        
        if Value then
            task.spawn(function()
                while task.wait(5) and _G.AutoRaid do
                    pcall(function()
                        -- Check fragments
                        if LP.Data.Fragments.Value >= 1000000 then
                            local raidType = _G.SelectedRaid or "Flame"
                            
                            -- Start raid
                            RS.Remotes.CommF_:InvokeServer("RaidsNpc", "Select", raidType)
                            
                            -- Teleport to raid
                            task.wait(1)
                            LP.Character.HumanoidRootPart.CFrame = CFrame.new(-12476, 375, -7551)
                        end
                    end)
                end
            end)
        end
    end,
})

-- Raid Selection
RaidSection:CreateDropdown({
    Name = "Select Raid",
    Options = {"Flame", "Ice", "Quake", "Light", "Dark", "String", "Rumble", "Magma", "Buddha", "Sand", "Phoenix"},
    CurrentOption = "Flame",
    Flag = "RaidSelection",
    Callback = function(Option)
        _G.SelectedRaid = Option
    end,
})

-- Teleport Tab
local TeleportTab = Window:CreateTab("üìç Teleport", 4483362458)
local TeleportSection = TeleportTab:CreateSection("Islands Teleport")

-- Updated Island Coordinates
local IslandData = {
    ["Starter Island"] = CFrame.new(1071, 16, 1427),
    ["Marine Starter"] = CFrame.new(-2594, 7, 2066),
    ["Middle Town"] = CFrame.new(-688, 16, 1574),
    ["Jungle"] = CFrame.new(-1247, 12, 339),
    ["Pirate Village"] = CFrame.new(-1122, 5, 3856),
    ["Desert"] = CFrame.new(1094, 5, 4193),
    ["Frozen Village"] = CFrame.new(1198, 27, -1131),
    ["Colosseum"] = CFrame.new(-1428, 7, -2800),
    ["Prison"] = CFrame.new(4854, 6, 740),
    ["Magma Village"] = CFrame.new(-5232, 9, 8469),
    ["Underwater City"] = CFrame.new(61164, 12, 1820),
    ["Fountain City"] = CFrame.new(5133, 5, 4038),
    ["Sky Island 1"] = CFrame.new(-4969, 717, -2623),
    ["Sky Island 2"] = CFrame.new(-7895, 5547, -380),
    ["Sky Island 3"] = CFrame.new(-7901, 5608, -1924),
    ["Hot Island"] = CFrame.new(-5778, 16, -4478),
    ["Cold Island"] = CFrame.new(-6181, 16, -4996),
    ["Ice Castle"] = CFrame.new(6112, 294, -6716),
    ["Usopp's Island"] = CFrame.new(4756, 8, 2850),
    ["Green Bit"] = CFrame.new(-2246, 73, -3217),
    ["Zou"] = CFrame.new(-9739, 4, -1616),
    ["Kingdom of Rose"] = CFrame.new(-388, 138, 5616),
    ["Elf Village"] = CFrame.new(-5891, 19, -5091),
    ["Flower Sea"] = CFrame.new(101, 25, 6341),
    ["Cafe"] = CFrame.new(-382, 74, 283),
    ["Mansion"] = CFrame.new(-390, 332, 674),
    ["Factory"] = CFrame.new(424, 211, -428),
}

for islandName, cf in pairs(IslandData) do
    TeleportSection:CreateButton({
        Name = islandName,
        Callback = function()
            pcall(function()
                local char = LP.Character
                if char and char:FindFirstChild("HumanoidRootPart") then
                    char.HumanoidRootPart.CFrame = cf
                end
            end)
        end,
    })
end

-- Player Tab
local PlayerTab = Window:CreateTab("üë§ Player", 4483362458)
local PlayerSection = PlayerTab:CreateSection("Player Modifications")

-- WalkSpeed
PlayerSection:CreateSlider({
    Name = "WalkSpeed",
    Range = {16, 200},
    Increment = 1,
    Suffix = "speed",
    CurrentValue = 16,
    Flag = "WalkSpeedSlider",
    Callback = function(Value)
        local char = LP.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid.WalkSpeed = Value
        end
    end,
})

-- JumpPower
PlayerSection:CreateSlider({
    Name = "JumpPower",
    Range = {50, 200},
    Increment = 1,
    Suffix = "power",
    CurrentValue = 50,
    Flag = "JumpPowerSlider",
    Callback = function(Value)
        local char = LP.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid.JumpPower = Value
        end
    end,
})

-- No Clip
PlayerSection:CreateToggle({
    Name = "No Clip",
    CurrentValue = false,
    Flag = "NoClipToggle",
    Callback = function(Value)
        _G.NoClip = Value
        
        if Value then
            task.spawn(function()
                while task.wait() and _G.NoClip do
                    pcall(function()
                        local char = LP.Character
                        if char then
                            for _, part in pairs(char:GetDescendants()) do
                                if part:IsA("BasePart") then
                                    part.CanCollide = false
                                end
                            end
                        end
                    end)
                end
            end)
        end
    end,
})

-- Misc Tab
local MiscTab = Window:CreateTab("‚öôÔ∏è Misc", 4483362458)
local MiscSection = MiscTab:CreateSection("Miscellaneous")

-- Auto Click
MiscSection:CreateToggle({
    Name = "Auto Click",
    CurrentValue = false,
    Flag = "AutoClickToggle",
    Callback = function(Value)
        _G.AutoClick = Value
        
        if Value then
            task.spawn(function()
                while task.wait(0.1) and _G.AutoClick do
                    pcall(function()
                        VU:CaptureController()
                        VU:ClickButton1(Vector2.new())
                    end)
                end
            end)
        end
    end,
})

-- Server Hop
MiscSection:CreateButton({
    Name = "Server Hop",
    Callback = function()
        pcall(function()
            local servers = {}
            
            -- Get servers
            local response = game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=100")
            local data = HTTPS:JSONDecode(response)
            
            if data and data.data then
                for _, server in pairs(data.data) do
                    if server.playing < server.maxPlayers and server.id ~= game.JobId then
                        table.insert(servers, server.id)
                    end
                end
                
                if #servers > 0 then
                    TS:TeleportToPlaceInstance(game.PlaceId, servers[math.random(1, #servers)])
                end
            end
        end)
    end,
})

-- Rejoin
MiscSection:CreateButton({
    Name = "Rejoin",
    Callback = function()
        TS:Teleport(game.PlaceId, LP)
    end,
})

-- Settings Tab
local SettingsTab = Window:CreateTab("üîß Settings", 4483362458)
local SettingsSection = SettingsTab:CreateSection("UI Settings")

-- Hide/Show Keybind
SettingsSection:CreateKeybind({
    Name = "Hide/Show UI",
    CurrentKeybind = "RightControl",
    HoldToInteract = false,
    Flag = "UIKeybind",
    Callback = function(Keybind)
        -- Rayfield t·ª± ƒë·ªông c√≥ t√≠nh nƒÉng n√†y
    end,
})

-- Destroy UI
SettingsSection:CreateButton({
    Name = "Destroy UI",
    Callback = function()
        Rayfield:Destroy()
    end,
})

-- Auto Skill Attack System
task.spawn(function()
    while task.wait(0.5) do
        if _G.AutoFarm or _G.AutoBoss then
            pcall(function()
                -- Press skills
                game:GetService("VirtualInputManager"):SendKeyEvent(true, "X", false, game)
                task.wait(0.05)
                game:GetService("VirtualInputManager"):SendKeyEvent(false, "X", false, game)
                
                game:GetService("VirtualInputManager"):SendKeyEvent(true, "Z", false, game)
                task.wait(0.05)
                game:GetService("VirtualInputManager"):SendKeyEvent(false, "Z", false, game)
            end)
        end
    end
end)

-- Enhanced Anti-AFK
task.spawn(function()
    while task.wait(60) do
        pcall(function()
            VU:CaptureController()
            VU:ClickButton2(Vector2.new())
        end)
    end
end)

-- Notify
Rayfield:Notify({
    Title = "Min V9 Hub",
    Content = "Updated for latest Roblox!",
    Duration = 5,
    Image = 4483362458,
})

print([[
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë     MIN V9 HUB UPDATED       ‚ïë
    ‚ïë   Compatible Latest Roblox   ‚ïë
    ‚ïë      Fixed All Remotes       ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    Features:
    ‚úÖ Auto Farm Level (Fixed)
    ‚úÖ Auto Farm Boss (Fixed)
    ‚úÖ Auto New World
    ‚úÖ Auto Raid with Selection
    ‚úÖ 25 Islands Teleport
    ‚úÖ WalkSpeed/JumpPower Slider
    ‚úÖ No Clip & Auto Click
    ‚úÖ Server Hop & Rejoin
    ‚úÖ Hide UI: RightControl
]])
